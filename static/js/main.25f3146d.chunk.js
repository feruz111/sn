(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{130:function(e,t,n){e.exports={item:"Post_item__1kNVy"}},131:function(e,t,n){e.exports={content:"Profile_content__1_t6i"}},163:function(e,t,n){},167:function(e,t,n){},22:function(e,t,n){e.exports={paginator:"Paginator_paginator__1-OnL",pages:"Paginator_pages__32lYO",page:"Paginator_page__3znQI",selectedPage:"Paginator_selectedPage__notKK",arrowRight:"Paginator_arrowRight__fbKSs",arrowLeft:"Paginator_arrowLeft__1kex1"}},23:function(e,t,n){e.exports={userPage:"User_userPage__15qUe",userPhoto:"User_userPhoto__nv6hZ",userInfo:"User_userInfo__1vZeY",userId:"User_userId__juthQ",userName:"User_userName__3445f",buttonFollowUnfollow:"User_buttonFollowUnfollow__zUONy"}},24:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__2l3oF",dialogsItems:"Dialogs_dialogsItems__1eb_z",dialog:"Dialogs_dialog__3hTO0",active:"Dialogs_active__3BvGC",messages:"Dialogs_messages__3tG52",message:"Dialogs_message__1lzfF"}},287:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(65),o=n.n(s),c=(n(163),n(27)),i=n(28),u=n(31),l=n(30),d=n(11),j=n(10),b=n(8),f=(n(167),n.p+"static/media/preloader.b767aab4.svg"),p=n(0),h=function(){return Object(p.jsx)("img",{src:f})},g=n(45),O=n(3),m={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Sveta"},{id:3,name:"Sasha"},{id:4,name:"Andrey"},{id:5,name:"Viktor"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"how is your it-kamasutra"},{id:3,message:"yo"},{id:4,message:"yo"},{id:5,message:"yo"}],newPostText:""},v=n(24),x=n.n(v),_=function(e){return Object(p.jsx)("div",{className:x.a.message,children:e.message})},P=n(15),w=function(e){return Object(p.jsx)("div",{className:x.a.dialog+" "+x.a.active,children:Object(p.jsx)(P.b,{to:"/dialogs/"+e.id,children:e.name})})},C=n(124),S=n(125),k=function(e){if(!e)return"Field is required"},y=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},N=n(33),I=n(37),U=n.n(I),A=function(e){e.input;var t=e.meta,n=t.touched,r=t.error,a=e.children,s=(Object(N.a)(e,["input","meta","children"]),n&&r);return Object(p.jsxs)("div",{className:U.a.formControl+" "+(s?U.a.error:""),children:[Object(p.jsx)("div",{children:a}),Object(p.jsx)("div",{children:s&&Object(p.jsx)("span",{children:r})})]})},T=function(e){var t=e.input,n=(e.meta,Object(N.a)(e,["input","meta"]));return Object(p.jsx)(A,Object(O.a)(Object(O.a)({},e),{},{children:Object(p.jsx)("textarea",Object(O.a)(Object(O.a)({},t),n))}))},E=function(e){var t=e.input,n=(e.meta,Object(N.a)(e,["input","meta"]));return Object(p.jsx)(A,Object(O.a)(Object(O.a)({},e),{},{children:Object(p.jsx)("input",Object(O.a)(Object(O.a)({},t),n))}))},F=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(p.jsxs)("div",{children:[Object(p.jsx)(C.a,Object(O.a)({validate:n,placeholder:e,name:t,component:r},a)),s]})},L=y(30),M=Object(S.a)({form:"addMessage"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)(C.a,{validate:[k,L],placeholder:"Enter your message",name:"addMessage",component:T}),Object(p.jsx)("button",{children:"Add message"})]})})),D=function(e){var t=e.messagesPage,n=t.dialogs.map((function(e){return Object(p.jsx)(w,{name:e.name,id:e.id})})),r=t.messages.map((function(e){return Object(p.jsx)(_,{message:e.message})}));return Object(p.jsxs)("div",{className:x.a.dialogs,children:[Object(p.jsx)("div",{className:x.a.dialogsItems,children:n}),Object(p.jsxs)("div",{className:x.a.messages,children:[r,Object(p.jsx)(M,{onSubmit:function(t){e.addMessage(t.addMessage)}})]})]})};function z(e){return{isAuth:e.auth.isAuth}}var R=function(e){return Object(d.b)(z)((function(t){t.isAuth;var n=Object(N.a)(t,["isAuth"]);return t.isAuth?Object(p.jsx)(e,Object(O.a)({},n)):Object(p.jsx)(j.a,{to:"/login"})}))},B=Object(b.d)(R,Object(d.b)((function(e){return{newPostText:e.messagesPage.newPostText,messagesPage:e.messagesPage}}),(function(e){return{addMessage:function(t){e(function(e){return{type:"ADD-MESSAGE",text:e}}(t))}}})))(D),G=n(39),H=n.n(G),J=n.p+"static/media/logo.b0d68e1f.svg",W=function(e){var t={backgroundImage:"url(".concat(J,")")};return Object(p.jsxs)("header",{className:H.a.header,children:[Object(p.jsx)("div",{className:H.a.logoImg,style:t}),Object(p.jsx)("div",{className:H.a.loginBlock,children:e.isAuth?Object(p.jsxs)("div",{className:H.a.loginBlockContainer,children:[Object(p.jsx)("div",{className:H.a.loginName,children:e.login}),Object(p.jsx)("div",{className:H.a.line}),Object(p.jsx)("button",{onClick:e.logoutTC,children:"Log out"})]}):Object(p.jsx)(P.b,{to:"/login",children:"Login"})})]})},V=n(9),Z=n.n(V),K=n(13),Y=n(21),q=n(129),X=n.n(q).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"5b802dfc-8175-4671-99bf-e30ddb894d16"}}),Q={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return X.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return X.post("follow/".concat(e))},unFollow:function(e){return X.delete("follow/".concat(e))},profileAPI:function(e){return console.warn("Obsolete method. Use profileAPI"),$.getProfile(e)}},$={getProfile:function(e){return X.get("profile/".concat(e)).then((function(e){return e}))},getStatus:function(e){return X.get("profile/status/".concat(e))},updateStatus:function(e){return X.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),X.put("/profile/photo",t,{headers:{"Content-type":"multipart/form-data"}})},saveProfile:function(e){return X.put("profile",e)}},ee=function(){return X.get("auth/me").then((function(e){return e.data}))},te=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return X.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},ne=function(){return X.delete("auth/login")},re=function(){return X.get("security/get-captcha-url")},ae="social-network/auth/SET_USER_DATA",se="social-network/auth/GET_CAPTCHA_URL_SUCCESS",oe={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},ce=function(e,t,n,r){return{type:ae,payload:{userId:e,email:t,login:n,isAuth:r}}},ie=function(e){return{type:se,payload:{captchaUrl:e}}},ue=function(){return function(){var e=Object(K.a)(Z.a.mark((function e(t){var n,r,a,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,s=r.email,o=r.login,t(ce(a,s,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},le=function(){return function(){var e=Object(K.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:n=e.sent,r=n.data.url,t(ie(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},de=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(p.jsx)(W,Object(O.a)({},this.props))}}]),n}(a.a.Component),je=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:ce,logoutTC:function(){return function(){var e=Object(K.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:0===e.sent.data.resultCode&&t(ce(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(de),be=(y(100),Object(S.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(p.jsx)("form",{onSubmit:t,children:Object(p.jsxs)("div",{children:[F("Email","email",[k],E),F("Password","password",[k],E,{type:"password"}),F(null,"rememberMe",[],E,{type:"checkbox"},"remember me"),r&&Object(p.jsx)("img",{src:r}),r&&F("Symbols from image","captcha",[k],E),n&&Object(p.jsx)("div",{className:U.a.formSubmissoinError,children:n}),Object(p.jsx)("button",{children:"Login"})]})})}))),fe=Object(d.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{loginTC:function(e,t,n,r){return function(){var a=Object(K.a)(Z.a.mark((function a(s){var o,c;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,te(e,t,n,r);case 2:0===(o=a.sent).data.resultCode?s(ue()):(10===o.data.resultCode&&s(le()),c=o.data.messages.length>0?o.data.messages[0]:"some error",s(Object(Y.a)("login",{_error:c})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,n=e.loginTC,r=e.captchaUrl;return t&&j.a,Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)(be,{onSubmit:function(e){n(e.email,e.password,e.rememberMe,e.captcha)},captchaUrl:r})]})})),pe=n(47),he=n.n(pe),ge=n.p+"static/media/loginNav.49e3b1e6.svg",Oe=n.p+"static/media/messagesNav.8085f152.svg",me=n.p+"static/media/profileNav.cda056b3.svg",ve=n.p+"static/media/usersNav.321ba854.svg",xe=[{url:"/profile",name:"Profile",img:{backgroundImage:"url(".concat(me,")")}},{url:"/dialogs",name:"Messages",img:{backgroundImage:"url(".concat(Oe,")")}},{url:"/Users",name:"Users",img:{backgroundImage:"url(".concat(ve,")")}},{url:"/login",name:"Login",img:{backgroundImage:"url(".concat(ge,")")}}],_e=function(){return Object(p.jsx)("nav",{className:he.a.nav,children:xe.map((function(e){return Object(p.jsxs)("div",{className:he.a.itemContainer,children:[Object(p.jsx)("div",{className:he.a.img,style:e.img}),Object(p.jsx)(P.b,{to:e.url,className:he.a.link,activeClassName:he.a.activeLink,children:e.name})]},e.url)}))})},Pe="SET_STATUS",we="DELETE_POST",Ce="SAVE_PHOTO_SUCCESS",Se={posts:[{id:1,message:"Hi, how are you",likesCount:12},{id:2,message:"it's first",likesCount:24},{id:3,message:"yo"},{id:4,message:"yo"},{id:5,message:"yo"}],profile:null,status:""},ke=function(e){return{type:Pe,status:e}},ye=function(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q.profileAPI(e);case 2:r=t.sent,n({type:"SET_USER_PROFILE",profile:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ne=y(10),Ie=Object(S.a)({form:"addPost"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)(C.a,{component:T,name:"addPost",placeholder:"enter text",validate:[k,Ne]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Add posts"})})]})})),Ue=n(93),Ae=n.n(Ue),Te=n(130),Ee=n.n(Te),Fe=function(e){return Object(p.jsxs)("div",{className:Ee.a.item,children:[Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:"https://i.ytimg.com/vi/o_26SGY83-I/movieposter_en.jpg"})}),e.message,Object(p.jsx)("div",{children:Object(p.jsxs)("span",{children:["Like ",e.like]})})]})},Le=a.a.memo((function(e){console.log("render");var t=e.posts.map((function(e){return Object(p.jsx)(Fe,{message:e.message,like:e.likesCount},e.id)}));return Object(p.jsxs)("div",{className:Ae.a.postsBlock,children:[Object(p.jsx)("h3",{children:"My posts"}),Object(p.jsx)(Ie,{onSubmit:function(t){e.addPost(t.addPost)}}),Object(p.jsx)("div",{className:Ae.a.posts,children:t})]})})),Me=Object(d.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostText:e}}(t))}}}))(Le),De=n(131),ze=n.n(De),Re=n(38),Be=n(46),Ge=n.n(Be),He=function(e){var t=Object(r.useState)(!0),n=Object(Re.a)(t,2),a=n[0],s=n[1],o=Object(r.useState)(e.reduxStatus),c=Object(Re.a)(o,2),i=c[0],u=c[1];Object(r.useEffect)((function(){u(e.reduxStatus)}),[e.reduxStatus]);return Object(p.jsx)("div",{children:a?Object(p.jsx)("div",{children:Object(p.jsxs)("span",{onDoubleClick:function(){s(!1)},children:[Object(p.jsx)("b",{children:"Status:"})," ",e.reduxStatus||"----"]})}):Object(p.jsx)("div",{children:Object(p.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!0),e.updateStatusThunkCreator(i)},value:i})})})},Je=n.p+"static/media/user.6e70c258.svg",We=Object(S.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,r=e.error;return Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"save"})}),r&&Object(p.jsx)("div",{className:U.a.formSubmissoinError,children:r}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Full name"}),": ",F("Full name","fullName",[],E)]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Looking for a job"}),":",F("","lookingForAJob",[],E,{type:"checkbox"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"My professional skills"}),":",F("My professional skills","lookingForAJobDescription",[],T)]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"About me"}),":",F("About me","aboutMe",[],T)]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Contacts"}),":",Object.keys(n.contacts).map((function(e){return Object(p.jsx)("div",{className:Ge.a.contact,children:Object(p.jsxs)("b",{children:[e,": ",F(e,"contacts."+e,[],E)]})},e)}))]})]})})),Ve=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(p.jsxs)("div",{children:[n&&Object(p.jsx)("button",{onClick:r,children:"Edit"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Full name"}),": ",t.fullName]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Contacts"}),":"," ",Object.keys(t.contacts).map((function(e){return Object(p.jsx)(Ze,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},Ze=function(e){var t=e.contactTitle,n=e.contactValue;return Object(p.jsxs)("div",{className:Ge.a.contact,children:[Object(p.jsx)("b",{children:t}),": ",n]})},Ke=function(e){var t=e.profile,n=e.reduxStatus,a=e.isOwner,s=e.updateStatusThunkCreator,o=e.savePhoto,c=e.saveProflie,i=Object(r.useState)(!1),u=Object(Re.a)(i,2),l=u[0],d=u[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:Ge.a.descriptionBlock,children:[Object(p.jsx)("img",{src:t.photos.large||Je,className:Ge.a.mainPhoto}),a&&Object(p.jsx)("input",{type:"file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&o(e.target.files[0])}}),l?Object(p.jsx)(We,{initialValue:t,profile:t,onSubmit:function(e){console.log(e),c(e).then((function(){d(!1)}))}}):Object(p.jsx)(Ve,{goToEditMode:function(){return d(!0)},isOwner:a,profile:t}),Object(p.jsx)(He,{reduxStatus:n,updateStatusThunkCreator:s})]})})},Ye=function(e){return Object(p.jsxs)("div",{className:ze.a.content,children:[Object(p.jsx)(Ke,{saveProflie:e.saveProfile,savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,reduxStatus:e.reduxStatus,updateStatusThunkCreator:e.updateStatusThunkCreator}),Object(p.jsx)(Me,{})]})},qe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;console.log(e),e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfileThunkCreator(e),this.props.getStatusThunkCreator(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile?Object(p.jsx)(Ye,Object(O.a)(Object(O.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,reduxStatus:this.props.reduxStatus,updateStatusThunkCreator:this.props.updateStatusThunkCreator,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})):Object(p.jsx)(h,{})}}]),n}(a.a.Component),Xe=Object(b.d)(R,Object(d.b)((function(e){return{profile:e.profilePage.profile,reduxStatus:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfileThunkCreator:ye,getStatusThunkCreator:function(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.getStatus(e);case 2:r=t.sent,n(ke(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatusThunkCreator:function(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(ke(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n){var r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.savePhoto(e);case 2:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:Ce,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n,r){var a,s;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,$.saveProfile(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}n(ye(a)),t.next=10;break;case 8:return n(Object(Y.a)("edit-profile",{_error:s.data.messages[0]})),t.abrupt("return",Promise.reject(s.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),j.g)(qe),Qe=n(132),$e=Object(Qe.a)((function(e){return e.userPage.users}),(function(e){return e.filter((function(e){return!0}))})),et=function(e){return e.userPage.pageSize},tt=function(e){return e.userPage.totalUsersCount},nt=function(e){return e.userPage.currentPage},rt=function(e){return e.userPage.isFetching},at=function(e){return e.userPage.followingInProgress},st=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(O.a)(Object(O.a)({},e),r):e}))},ot="FOLLOWING_IN_PROGRESS",ct={users:[],pageSize:8,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},it=function(e){return{type:"FOLLOW",userId:e}},ut=function(e){return{type:"UNFOLLOW",userId:e}},lt=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},dt=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},jt=function(e,t){return{type:ot,userId:t,isFetching:e}},bt=function(){var e=Object(K.a)(Z.a.mark((function e(t,n,r,a){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(jt(!0,n)),e.next=3,r(n);case 3:0===e.sent.data.resultCode&&t(a(n)),t(jt(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ft=n(22),pt=n.n(ft),ht=n.p+"static/media/rightArrow.c1f9939a.svg",gt=n.p+"static/media/leftArrow.48e7b1ac.svg",Ot=function(e){for(var t=e.totalUsersCount,n=e.pageSize,a=e.currentPage,s=e.isAuth,o=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,u={backgroundImage:"url(".concat(ht,")")},l={backgroundImage:"url(".concat(gt,")")},d=Math.ceil(t/n),b=[],f=1;f<=d;f++)b.push(f);var h=Math.ceil(d/i),g=Object(r.useState)(1),O=Object(Re.a)(g,2),m=O[0],v=O[1],x=(m-1)*i+1,_=m*i;return!1===s?Object(p.jsx)(j.a,{to:"/login"}):Object(p.jsxs)("div",{className:pt.a.paginator,children:[Object(p.jsx)("div",{className:pt.a.arrowLeftContainer,children:m>1&&Object(p.jsx)("button",{style:l,className:pt.a.arrowLeft,onClick:function(){v(m-1)}})}),Object(p.jsx)("div",{className:pt.a.pages,children:b.filter((function(e){return e>=x&&e<=_})).map((function(e){return Object(p.jsx)("div",{className:a===e?"".concat(pt.a.selectedPage," ").concat(pt.a.page):pt.a.page,onClick:function(t){o(e)},children:e},e)}))}),Object(p.jsx)("div",{className:pt.a.arrowRightContainer,children:h>m&&Object(p.jsx)("button",{style:u,className:pt.a.arrowRight,onClick:function(){v(m+1)}})})]})},mt=n(23),vt=n.n(mt),xt=function(e){var t=e.user,n=e.followingInProgress,r=e.follow,a=e.unFollow;return console.log(t),Object(p.jsxs)("div",{className:vt.a.userPage,children:[Object(p.jsx)("div",{className:vt.a.avatar,children:Object(p.jsx)(P.b,{to:"/profile/".concat(t.id),children:Object(p.jsx)("img",{src:null!==t.photos.small?t.photos.small:Je,className:vt.a.userPhoto})})}),Object(p.jsxs)("div",{className:vt.a.userInfo,children:[Object(p.jsx)("div",{className:vt.a.userName,children:t.name}),Object(p.jsxs)("div",{className:vt.a.userId,children:["Id | ",t.id]})]}),Object(p.jsx)("div",{className:vt.a.buttonContainer,children:t.followed?Object(p.jsx)("button",{className:vt.a.buttonFollowUnfollow,disabled:n.some((function(e){return e!==t.id})),onClick:function(){a(t.id)},children:"Unfollow"}):Object(p.jsx)("button",{className:vt.a.buttonFollowUnfollow,disabled:n.some((function(e){return e!==t.id})),onClick:function(){r(t.id)},children:"Follow"})})]})},_t=n(70),Pt=n.n(_t),wt=function(e){var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,a=e.isAuth,s=e.users,o=e.onPageChanged,c=Object(N.a)(e,["totalUsersCount","pageSize","currentPage","isAuth","users","onPageChanged"]);return Object(p.jsxs)("div",{className:Pt.a.usersPageContainer,children:[Object(p.jsx)("div",{className:Pt.a.userContainer,children:s.map((function(e){return Object(p.jsx)("div",{className:Pt.a.user,children:Object(p.jsx)(xt,{user:e,followingInProgress:c.followingInProgress,follow:c.follow,unFollow:c.unFollow},e.id)})}))}),Object(p.jsx)(Ot,{pageSize:n,currentPage:r,totalUsersCount:t,onPageChanged:o,isAuth:a})]})},Ct=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){var n=e.props.pageSize;e.props.getUsersThunkCreator(t,n)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.pageSize,n=e.currentPage;this.props.getUsersThunkCreator(n,t)}},{key:"render",value:function(){return Object(p.jsxs)(p.Fragment,{children:[this.props.isFetching?Object(p.jsx)(h,{}):null,Object(p.jsx)(wt,{isAuth:this.props.isAuth,followingInProgress:this.props.followingInProgress,followingInProgressAC:jt,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,onPageChanged:this.onPageChanged,currentPage:this.props.currentPage,users:this.props.users,unFollow:this.props.unFollow,follow:this.props.follow})]})}}]),n}(a.a.Component),St=Object(b.d)(Object(d.b)((function(e){return{users:$e(e),pageSize:et(e),totalUsersCount:tt(e),currentPage:nt(e),isFetching:rt(e),followingInProgress:at(e),isAuth:e.auth.isAuth}}),{follow:function(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:bt(n,e,Q.follow.bind(Q),it);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollow:function(e){return function(){var t=Object(K.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:bt(n,e,Q.unFollow.bind(Q),ut);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:lt,followingInProgressAC:jt,getUsersThunkCreator:function(e,t){return function(){var n=Object(K.a)(Z.a.mark((function n(r){var a;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(dt(!0)),r(lt(e)),n.next=4,Q.getUsers(e,t);case 4:a=n.sent,r(dt(!1)),r({type:"SET_USERS",users:a.items}),console.log(a.items),r({type:"SET_TOTAL_USERS_COUNT",totalUsersCount:a.totalCount});case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(Ct),kt="INITIALIZED_SUCCESS",yt={initialized:!1},Nt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).catchAllUnHandledErrors=function(){alert("some error")},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnHandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnHandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(p.jsxs)("div",{className:"app-wrapper",children:[Object(p.jsx)(je,{}),Object(p.jsx)(_e,{}),Object(p.jsx)("div",{className:"app-wrapper-content",children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(p.jsx)(j.a,{to:"/profile"})}}),Object(p.jsx)(j.b,{path:"/dialogs",render:function(){return Object(p.jsx)(B,{})}}),Object(p.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(p.jsx)(Xe,{})}}),Object(p.jsx)(j.b,{path:"/users",component:St}),Object(p.jsx)(j.b,{path:"/login",component:fe}),Object(p.jsx)(j.b,{path:"*",render:function(){return Object(p.jsx)("div",{children:"404 NOT FOUND"})}})]})})]}):Object(p.jsx)(h,{})}}]),n}(a.a.Component),It=Object(b.d)(j.g,Object(d.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(ue());Promise.all([t]).then((function(){e({type:kt})}))}}}))(Nt),Ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,288)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))},At=n(133),Tt=n(126),Et=Object(b.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":return Object(O.a)(Object(O.a)({},e),{},{posts:[].concat(Object(g.a)(e.posts),[{id:5,message:t.newPostText,likesCount:0}])});case"SET_USER_PROFILE":return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});case Pe:return Object(O.a)(Object(O.a)({},e),{},{status:t.status});case we:return Object(O.a)(Object(O.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case Ce:return Object(O.a)(Object(O.a)({},e),{},{profile:Object(O.a)(Object(O.a)({},e.profile),{},{photos:t.photos})});default:return e}},messagesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":return Object(O.a)(Object(O.a)({},e),{},{newPostText:"",messages:[].concat(Object(g.a)(e.messages),[{id:6,message:t.text}])});default:return e}},userPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:st(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return console.log(st(e.users,t.userId,"id",{followed:!0})),Object(O.a)(Object(O.a)({},e),{},{users:st(e.users,t.userId,"id",{followed:!0})});case"SET_USERS":return Object(O.a)(Object(O.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case ot:return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(g.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:case ae:return Object(O.a)(Object(O.a)({},e),t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kt:return Object(O.a)(Object(O.a)({},e),{},{initialized:!0});default:return e}},form:Tt.a}),Ft=Object(b.e)(Et,Object(b.a)(At.a));window.store=Ft;var Lt=Ft;o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(P.a,{children:Object(p.jsx)(d.a,{store:Lt,children:Object(p.jsx)(It,{})})})}),document.getElementById("root")),Ut()},37:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1-OWX",error:"FormsControls_error__9hqAk",formSubmissoinError:"FormsControls_formSubmissoinError__Zw5gy"}},39:function(e,t,n){e.exports={header:"Header_header__2aBSP",logoImg:"Header_logoImg__1wtpB",loginBlock:"Header_loginBlock__1pf-7",loginBlockContainer:"Header_loginBlockContainer__X2UsU",loginName:"Header_loginName__3mmga",line:"Header_line__1oGww"}},46:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__12L-I",mainPhoto:"ProfileInfo_mainPhoto__1r5dj",contact:"ProfileInfo_contact__1Nr4E"}},47:function(e,t,n){e.exports={nav:"Navbar_nav__2zCt2",itemContainer:"Navbar_itemContainer__3rGWk",link:"Navbar_link__256bs",activeLink:"Navbar_activeLink__3myhE",img:"Navbar_img__kubgk"}},70:function(e,t,n){e.exports={usersPageContainer:"Users_usersPageContainer__1wBua",userContainer:"Users_userContainer__3uXOx",user:"Users_user__1ZMTn"}},93:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__2Mc5B",posts:"MyPosts_posts__LdFJw"}}},[[287,1,2]]]);
//# sourceMappingURL=main.25f3146d.chunk.js.map