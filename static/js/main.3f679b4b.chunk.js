(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{130:function(e,t,n){e.exports={loginPage:"Login_loginPage__JqKZd"}},131:function(e,t,n){e.exports={item:"Post_item__1kNVy"}},132:function(e,t,n){e.exports={content:"Profile_content__1_t6i"}},164:function(e,t,n){},168:function(e,t,n){},19:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__2l3oF",dialogsItems:"Dialogs_dialogsItems__1eb_z",dialog:"Dialogs_dialog__3hTO0",active:"Dialogs_active__3BvGC",messages:"Dialogs_messages__3tG52",message:"Dialogs_message__1lzfF",addMessageButton:"Dialogs_addMessageButton__2JsFu"}},23:function(e,t,n){e.exports={paginator:"Paginator_paginator__1-OnL",pages:"Paginator_pages__32lYO",page:"Paginator_page__3znQI",selectedPage:"Paginator_selectedPage__notKK",arrowRight:"Paginator_arrowRight__fbKSs",arrowLeft:"Paginator_arrowLeft__1kex1"}},24:function(e,t,n){e.exports={userPage:"User_userPage__15qUe",userPhoto:"User_userPhoto__nv6hZ",userInfo:"User_userInfo__1vZeY",userId:"User_userId__juthQ",userName:"User_userName__3445f",buttonFollowUnfollow:"User_buttonFollowUnfollow__zUONy"}},25:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__12L-I",userPhotoContainer:"ProfileInfo_userPhotoContainer__2z9AG",mainPhoto:"ProfileInfo_mainPhoto__1r5dj",contact:"ProfileInfo_contact__1Nr4E",editSaveButton:"ProfileInfo_editSaveButton__3ShIX"}},288:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(65),o=n.n(s),i=(n(164),n(28)),c=n(29),u=n(32),l=n(31),d=n(11),j=n(10),h=n(8),b=(n(168),n.p+"static/media/preloader.b767aab4.svg"),p=n(0),f=function(){return Object(p.jsx)("img",{src:b})},g=n(46),O=n(3),m={dialogs:[{id:1,name:"John"},{id:2,name:"Ali"},{id:3,name:"Black"},{id:4,name:"Andrey"},{id:5,name:"Helena"},{id:6,name:"Shack"}],messages:[{id:1,message:"Hi"},{id:2,message:"how are u doin"},{id:3,message:"yo"},{id:4,message:"yo"}],newPostText:""},v=n(15),x=n(19),P=n.n(x),C=function(e){return Object(p.jsx)("div",{className:P.a.dialog+" "+P.a.active,children:Object(p.jsx)(v.b,{to:"/dialogs/"+e.id,children:e.name})})},w=n(124),_=n(125),k=function(e){if(!e)return"Field is required"},S=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},N=n(35),I=n(34),E=n.n(I),y=function(e){e.input;var t=e.meta,n=t.touched,r=t.error,a=e.children,s=(Object(N.a)(e,["input","meta","children"]),n&&r);return Object(p.jsxs)("div",{className:E.a.formControl+" "+(s?E.a.error:""),children:[Object(p.jsx)("div",{children:a}),Object(p.jsx)("div",{children:s&&Object(p.jsx)("span",{children:r})})]})},A=function(e){var t=e.input,n=(e.meta,Object(N.a)(e,["input","meta"]));return Object(p.jsx)(y,Object(O.a)(Object(O.a)({},e),{},{children:Object(p.jsx)("textarea",Object(O.a)(Object(O.a)({},t),n))}))},U=function(e){var t=e.input,n=(e.meta,Object(N.a)(e,["input","meta"]));return Object(p.jsx)(y,Object(O.a)(Object(O.a)({},e),{},{children:Object(p.jsx)("input",Object(O.a)(Object(O.a)({},t),n))}))},T=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(p.jsxs)("div",{className:E.a.inputElem,children:[Object(p.jsx)(w.a,Object(O.a)({validate:n,placeholder:e,name:t,component:r},a)),Object(p.jsx)("div",{children:s})]})},F=S(30),R=Object(_.a)({form:"addMessage"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)(w.a,{validate:[k,F],placeholder:"Enter your message",name:"addMessage",component:A}),Object(p.jsx)("button",{className:P.a.addMessageButton,children:"Add message"})]})})),L=function(e){return Object(p.jsx)("div",{className:P.a.message,children:e.message})},D=function(e){var t=e.messagesPage,n=t.dialogs.map((function(e){return Object(p.jsx)(C,{name:e.name,id:e.id})})),r=t.messages.map((function(e){return Object(p.jsx)(L,{message:e.message})}));return Object(p.jsxs)("div",{className:P.a.dialogs,children:[Object(p.jsx)("div",{className:P.a.dialogsItems,children:n}),Object(p.jsxs)("div",{className:P.a.messages,children:[r,Object(p.jsx)(R,{onSubmit:function(t){e.addMessage(t.addMessage)}})]})]})};function B(e){return{isAuth:e.auth.isAuth}}var M=function(e){return Object(d.b)(B)((function(t){t.isAuth;var n=Object(N.a)(t,["isAuth"]);return t.isAuth?Object(p.jsx)(e,Object(O.a)({},n)):Object(p.jsx)(j.a,{to:"/login"})}))},z=Object(h.d)(M,Object(d.b)((function(e){return{newPostText:e.messagesPage.newPostText,messagesPage:e.messagesPage}}),(function(e){return{addMessage:function(t){e(function(e){return{type:"ADD-MESSAGE",text:e}}(t))}}})))(D),J=n(36),V=n.n(J),Q=function(e){var t={backgroundImage:"url(".concat("data:image/png;base64,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",")")};return Object(p.jsxs)("header",{className:V.a.header,children:[Object(p.jsx)("div",{className:V.a.logoImg,style:t}),Object(p.jsx)("div",{className:V.a.loginBlock,children:e.isAuth?Object(p.jsxs)("div",{className:V.a.loginBlockContainer,children:[Object(p.jsx)("div",{className:V.a.loginName,children:e.login}),Object(p.jsx)("div",{className:V.a.line}),Object(p.jsx)("button",{onClick:e.logoutTC,children:"Log out"})]}):Object(p.jsx)(v.b,{className:V.a.loginBlockContainer,to:"/login",children:Object(p.jsx)("button",{children:"Log in"})})})]})},G=n(9),Y=n.n(G),H=n(13),Z=n(22),q=n(129),W=n.n(q).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"5b802dfc-8175-4671-99bf-e30ddb894d16"}}),K={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return W.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return W.post("follow/".concat(e))},unFollow:function(e){return W.delete("follow/".concat(e))},profileAPI:function(e){return console.warn("Obsolete method. Use profileAPI"),X.getProfile(e)}},X={getProfile:function(e){return W.get("profile/".concat(e)).then((function(e){return e}))},getStatus:function(e){return W.get("profile/status/".concat(e))},updateStatus:function(e){return W.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),W.put("/profile/photo",t,{headers:{"Content-type":"multipart/form-data"}})},saveProfile:function(e){return W.put("profile",e)}},$=function(){return W.get("auth/me").then((function(e){return e.data}))},ee=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return W.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},te=function(){return W.delete("auth/login")},ne=function(){return W.get("security/get-captcha-url")},re="social-network/auth/SET_USER_DATA",ae="social-network/auth/GET_CAPTCHA_URL_SUCCESS",se={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},oe=function(e,t,n,r){return{type:re,payload:{userId:e,email:t,login:n,isAuth:r}}},ie=function(e){return{type:ae,payload:{captchaUrl:e}}},ce=function(){return function(){var e=Object(H.a)(Y.a.mark((function e(t){var n,r,a,s,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,s=r.email,o=r.login,t(oe(a,s,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ue=function(){return function(){var e=Object(H.a)(Y.a.mark((function e(t){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:n=e.sent,r=n.data.url,t(ie(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(p.jsx)(Q,Object(O.a)({},this.props))}}]),n}(a.a.Component),de=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:oe,logoutTC:function(){return function(){var e=Object(H.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:0===e.sent.data.resultCode&&t(oe(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(le),je=(S(100),Object(_.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(p.jsx)("form",{onSubmit:t,children:Object(p.jsxs)("div",{children:[T("Email","email",[k],U),T("Password","password",[k],U,{type:"password"}),T(null,"rememberMe",[],U,{type:"checkbox"},"Remember me"),r&&Object(p.jsx)("img",{src:r}),r&&T("Symbols from image","captcha",[k],U),n&&Object(p.jsx)("div",{className:E.a.formSubmissoinError,children:n}),Object(p.jsx)("button",{children:"Login"})]})})}))),he=n(130),be=n.n(he),pe=Object(d.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{loginTC:function(e,t,n,r){return function(){var a=Object(H.a)(Y.a.mark((function a(s){var o,i;return Y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee(e,t,n,r);case 2:0===(o=a.sent).data.resultCode?s(ce()):(10===o.data.resultCode&&s(ue()),i=o.data.messages.length>0?o.data.messages[0]:"some error",s(Object(Z.a)("login",{_error:i})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,n=e.loginTC,r=e.captchaUrl;return t?Object(p.jsx)(j.a,{to:"/profile"}):Object(p.jsx)("div",{className:be.a.loginPage,children:Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)(je,{onSubmit:function(e){n(e.email,e.password,e.rememberMe,e.captcha)},captchaUrl:r})]})})})),fe=n(47),ge=n.n(fe),Oe=n.p+"static/media/loginNav.49e3b1e6.svg",me=n.p+"static/media/messagesNav.8085f152.svg",ve=n.p+"static/media/profileNav.cda056b3.svg",xe=n.p+"static/media/usersNav.321ba854.svg",Pe=[{url:"/profile",name:"Profile",img:{backgroundImage:"url(".concat(ve,")")}},{url:"/dialogs",name:"Messages",img:{backgroundImage:"url(".concat(me,")")}},{url:"/Users",name:"Users",img:{backgroundImage:"url(".concat(xe,")")}},{url:"/login",name:"Login",img:{backgroundImage:"url(".concat(Oe,")")}}],Ce=function(){return Object(p.jsx)("nav",{className:ge.a.nav,children:Pe.map((function(e){return Object(p.jsxs)("div",{className:ge.a.itemContainer,children:[Object(p.jsx)("div",{className:ge.a.img,style:e.img}),Object(p.jsx)(v.b,{to:e.url,className:ge.a.link,activeClassName:ge.a.activeLink,children:e.name})]},e.url)}))})},we="SET_STATUS",_e="DELETE_POST",ke="SAVE_PHOTO_SUCCESS",Se={posts:[{id:1,message:"Hi, how are you",likesCount:12},{id:2,message:"it's first",likesCount:24},{id:3,message:"yo",likesCount:0},{id:4,message:"yo",likesCount:10},{id:5,message:"yo",likesCount:0}],profile:null,status:""},Ne=function(e){return{type:we,status:e}},Ie=function(e){return function(){var t=Object(H.a)(Y.a.mark((function t(n){var r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.profileAPI(e);case 2:r=t.sent,n({type:"SET_USER_PROFILE",profile:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ee=S(10),ye=Object(_.a)({form:"addPost"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(p.jsx)(w.a,{component:A,name:"addPost",placeholder:"enter text",validate:[k,Ee]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Add posts"})})]})})),Ae=n(93),Ue=n.n(Ae),Te=n(131),Fe=n.n(Te),Re=function(e){return Object(p.jsxs)("div",{className:Fe.a.item,children:[Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:"https://i.ytimg.com/vi/o_26SGY83-I/movieposter_en.jpg"})}),e.message,Object(p.jsx)("div",{children:Object(p.jsxs)("span",{children:["Like ",e.like]})})]})},Le=a.a.memo((function(e){console.log("render");var t=e.posts.map((function(e){return Object(p.jsx)(Re,{message:e.message,like:e.likesCount},e.id)}));return Object(p.jsxs)("div",{className:Ue.a.postsBlock,children:[Object(p.jsx)("h3",{children:"My posts"}),Object(p.jsx)(ye,{onSubmit:function(t){e.addPost(t.addPost)}}),Object(p.jsx)("div",{className:Ue.a.posts,children:t})]})})),De=Object(d.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostText:e}}(t))}}}))(Le),Be=n(132),Me=n.n(Be),ze=n(40),Je=n(25),Ve=n.n(Je),Qe=function(e){var t=Object(r.useState)(!0),n=Object(ze.a)(t,2),a=n[0],s=n[1],o=Object(r.useState)(e.reduxStatus),i=Object(ze.a)(o,2),c=i[0],u=i[1];Object(r.useEffect)((function(){u(e.reduxStatus)}),[e.reduxStatus]);return Object(p.jsx)("div",{children:a?Object(p.jsx)("div",{children:Object(p.jsxs)("span",{onDoubleClick:function(){s(!1)},children:[Object(p.jsx)("b",{children:"Status: "}),"\ud83d\udd8a\ufe0f",e.reduxStatus||"----"]})}):Object(p.jsx)("div",{children:Object(p.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!0),e.updateStatusThunkCreator(c)},value:c})})})},Ge=n.p+"static/media/user.6e70c258.svg",Ye=Object(_.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,r=e.error;return Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:Ve.a.editSaveButton,children:"save"})}),r&&Object(p.jsx)("div",{className:E.a.formSubmissoinError,children:r}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Full name"}),": ",T("Full name","fullName",[],U)]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Looking for a job"}),":",T("","lookingForAJob",[],U,{type:"checkbox"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"My professional skills"}),":",T("My professional skills","lookingForAJobDescription",[],A)]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"About me"}),":",T("About me","aboutMe",[],A)]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Contacts"}),":",Object.keys(n.contacts).map((function(e){return Object(p.jsx)("div",{className:Ve.a.contact,children:Object(p.jsxs)("b",{children:[e,": ",T(e,"contacts."+e,[],U)]})},e)}))]})]})})),He=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(p.jsxs)("div",{children:[n&&Object(p.jsx)("button",{className:Ve.a.editSaveButton,onClick:r,children:"Edit"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Full name"}),": ",t.fullName]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"Contacts"}),":",["Facebook","Website","Github"].map((function(e){return Object(p.jsx)(Ze,{contactTitle:e,contactValue:"---"},e)}))]})]})},Ze=function(e){var t=e.contactTitle,n=e.contactValue;return Object(p.jsxs)("div",{className:Ve.a.contact,children:[Object(p.jsx)("b",{children:t}),": ",n]})},qe=function(e){var t=e.profile,n=e.reduxStatus,a=e.isOwner,s=e.updateStatusThunkCreator,o=e.savePhoto,i=e.saveProflie,c=Object(r.useState)(!1),u=Object(ze.a)(c,2),l=u[0],d=u[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:Ve.a.descriptionBlock,children:[Object(p.jsxs)("div",{className:Ve.a.userPhotoContainer,children:[Object(p.jsx)("img",{src:t.photos.large||Ge,className:Ve.a.mainPhoto}),Object(p.jsx)("div",{children:a&&Object(p.jsx)("input",{type:"file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&o(e.target.files[0])}})})]}),l?Object(p.jsx)(Ye,{initialValue:t,profile:t,onSubmit:function(e){console.log(e),i(e).then((function(){d(!1)}))}}):Object(p.jsx)(He,{goToEditMode:function(){return d(!0)},isOwner:a,profile:t}),Object(p.jsx)(Qe,{reduxStatus:n,updateStatusThunkCreator:s})]})})},We=function(e){return Object(p.jsxs)("div",{className:Me.a.content,children:[Object(p.jsx)(qe,{saveProflie:e.saveProfile,savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,reduxStatus:e.reduxStatus,updateStatusThunkCreator:e.updateStatusThunkCreator}),Object(p.jsx)(De,{})]})},Ke=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;console.log(e),e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfileThunkCreator(e),this.props.getStatusThunkCreator(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profile?Object(p.jsx)(We,Object(O.a)(Object(O.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,reduxStatus:this.props.reduxStatus,updateStatusThunkCreator:this.props.updateStatusThunkCreator,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})):Object(p.jsx)(f,{})}}]),n}(a.a.Component),Xe=Object(h.d)(M,Object(d.b)((function(e){return{profile:e.profilePage.profile,reduxStatus:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfileThunkCreator:Ie,getStatusThunkCreator:function(e){return function(){var t=Object(H.a)(Y.a.mark((function t(n){var r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getStatus(e);case 2:r=t.sent,n(Ne(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatusThunkCreator:function(e){return function(){var t=Object(H.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(Ne(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(H.a)(Y.a.mark((function t(n){var r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.savePhoto(e);case 2:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:ke,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(H.a)(Y.a.mark((function t(n,r){var a,s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,X.saveProfile(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}n(Ie(a)),t.next=10;break;case 8:return n(Object(Z.a)("edit-profile",{_error:s.data.messages[0]})),t.abrupt("return",Promise.reject(s.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),j.g)(Ke),$e=n(133),et=Object($e.a)((function(e){return e.userPage.users}),(function(e){return e.filter((function(e){return!0}))})),tt=function(e){return e.userPage.pageSize},nt=function(e){return e.userPage.totalUsersCount},rt=function(e){return e.userPage.currentPage},at=function(e){return e.userPage.isFetching},st=function(e){return e.userPage.followingInProgress},ot=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(O.a)(Object(O.a)({},e),r):e}))},it="FOLLOWING_IN_PROGRESS",ct={users:[],pageSize:8,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},ut=function(e){return{type:"FOLLOW",userId:e}},lt=function(e){return{type:"UNFOLLOW",userId:e}},dt=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},jt=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},ht=function(e,t){return{type:it,userId:t,isFetching:e}},bt=function(){var e=Object(H.a)(Y.a.mark((function e(t,n,r,a){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ht(!0,n)),e.next=3,r(n);case 3:0===e.sent.data.resultCode&&t(a(n)),t(ht(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),pt=n(23),ft=n.n(pt),gt=n.p+"static/media/rightArrow.c1f9939a.svg",Ot=n.p+"static/media/leftArrow.48e7b1ac.svg",mt=function(e){for(var t=e.totalUsersCount,n=e.pageSize,a=e.currentPage,s=e.isAuth,o=e.onPageChanged,i=e.portionSize,c=void 0===i?10:i,u={backgroundImage:"url(".concat(gt,")")},l={backgroundImage:"url(".concat(Ot,")")},d=Math.ceil(t/n),h=[],b=1;b<=d;b++)h.push(b);var f=Math.ceil(d/c),g=Object(r.useState)(1),O=Object(ze.a)(g,2),m=O[0],v=O[1],x=(m-1)*c+1,P=m*c;return!1===s?Object(p.jsx)(j.a,{to:"/login"}):Object(p.jsxs)("div",{className:ft.a.paginator,children:[Object(p.jsx)("div",{className:ft.a.arrowLeftContainer,children:m>1&&Object(p.jsx)("button",{style:l,className:ft.a.arrowLeft,onClick:function(){v(m-1)}})}),Object(p.jsx)("div",{className:ft.a.pages,children:h.filter((function(e){return e>=x&&e<=P})).map((function(e){return Object(p.jsx)("div",{className:a===e?"".concat(ft.a.selectedPage," ").concat(ft.a.page):ft.a.page,onClick:function(t){o(e)},children:e},e)}))}),Object(p.jsx)("div",{className:ft.a.arrowRightContainer,children:f>m&&Object(p.jsx)("button",{style:u,className:ft.a.arrowRight,onClick:function(){v(m+1)}})})]})},vt=n(24),xt=n.n(vt),Pt=function(e){var t=e.user,n=e.followingInProgress,r=e.follow,a=e.unFollow;return console.log(t),Object(p.jsxs)("div",{className:xt.a.userPage,children:[Object(p.jsx)("div",{className:xt.a.avatar,children:Object(p.jsx)(v.b,{to:"/profile/".concat(t.id),children:Object(p.jsx)("img",{src:null!==t.photos.small?t.photos.small:Ge,className:xt.a.userPhoto})})}),Object(p.jsxs)("div",{className:xt.a.userInfo,children:[Object(p.jsx)("div",{className:xt.a.userName,children:t.name}),Object(p.jsxs)("div",{className:xt.a.userId,children:["Id | ",t.id]})]}),Object(p.jsx)("div",{className:xt.a.buttonContainer,children:t.followed?Object(p.jsx)("button",{className:xt.a.buttonFollowUnfollow,disabled:n.some((function(e){return e!==t.id})),onClick:function(){a(t.id)},children:"Unfollow"}):Object(p.jsx)("button",{className:xt.a.buttonFollowUnfollow,disabled:n.some((function(e){return e!==t.id})),onClick:function(){r(t.id)},children:"Follow"})})]})},Ct=n(70),wt=n.n(Ct),_t=function(e){var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,a=e.isAuth,s=e.users,o=e.onPageChanged,i=Object(N.a)(e,["totalUsersCount","pageSize","currentPage","isAuth","users","onPageChanged"]);return Object(p.jsxs)("div",{className:wt.a.usersPageContainer,children:[i.isFetching?Object(p.jsx)(f,{}):Object(p.jsx)("div",{className:wt.a.userContainer,children:s.map((function(e){return Object(p.jsx)("div",{className:wt.a.user,children:Object(p.jsx)(Pt,{user:e,followingInProgress:i.followingInProgress,follow:i.follow,unFollow:i.unFollow},e.id)})}))}),Object(p.jsx)("div",{children:Object(p.jsx)(mt,{pageSize:n,currentPage:r,totalUsersCount:t,onPageChanged:o,isAuth:a})})]})},kt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){var n=e.props.pageSize;e.props.getUsersThunkCreator(t,n)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.pageSize,n=e.currentPage;this.props.getUsersThunkCreator(n,t)}},{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(_t,{isFetching:this.props.isFetching,isAuth:this.props.isAuth,followingInProgress:this.props.followingInProgress,followingInProgressAC:ht,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,onPageChanged:this.onPageChanged,currentPage:this.props.currentPage,users:this.props.users,unFollow:this.props.unFollow,follow:this.props.follow})})}}]),n}(a.a.Component),St=Object(h.d)(Object(d.b)((function(e){return{users:et(e),pageSize:tt(e),totalUsersCount:nt(e),currentPage:rt(e),isFetching:at(e),followingInProgress:st(e),isAuth:e.auth.isAuth}}),{follow:function(e){return function(){var t=Object(H.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:bt(n,e,K.follow.bind(K),ut);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollow:function(e){return function(){var t=Object(H.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:bt(n,e,K.unFollow.bind(K),lt);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:dt,followingInProgressAC:ht,getUsersThunkCreator:function(e,t){return function(){var n=Object(H.a)(Y.a.mark((function n(r){var a;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(jt(!0)),r(dt(e)),n.next=4,K.getUsers(e,t);case 4:a=n.sent,r(jt(!1)),r({type:"SET_USERS",users:a.items}),console.log(a.items),r({type:"SET_TOTAL_USERS_COUNT",totalUsersCount:a.totalCount});case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(kt),Nt="INITIALIZED_SUCCESS",It={initialized:!1},Et=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).catchAllUnHandledErrors=function(){alert("some error")},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnHandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnHandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(p.jsxs)("div",{className:"app-wrapper",children:[Object(p.jsx)(de,{}),Object(p.jsx)(Ce,{}),Object(p.jsx)("div",{className:"app-wrapper-content",children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(p.jsx)(j.a,{to:"/profile"})}}),Object(p.jsx)(j.b,{path:"/dialogs",render:function(){return Object(p.jsx)(z,{})}}),Object(p.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(p.jsx)(Xe,{})}}),Object(p.jsx)(j.b,{path:"/users",component:St}),Object(p.jsx)(j.b,{path:"/login",component:pe}),Object(p.jsx)(j.b,{path:"*",render:function(){return Object(p.jsx)("div",{children:"404 NOT FOUND"})}})]})})]}):Object(p.jsx)(f,{})}}]),n}(a.a.Component),yt=Object(h.d)(j.g,Object(d.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(ce());Promise.all([t]).then((function(){e({type:Nt})}))}}}))(Et),At=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,289)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))},Ut=n(134),Tt=n(126),Ft=Object(h.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":return Object(O.a)(Object(O.a)({},e),{},{posts:[].concat(Object(g.a)(e.posts),[{id:5,message:t.newPostText,likesCount:0}])});case"SET_USER_PROFILE":return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});case we:return Object(O.a)(Object(O.a)({},e),{},{status:t.status});case _e:return Object(O.a)(Object(O.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case ke:return Object(O.a)(Object(O.a)({},e),{},{profile:Object(O.a)(Object(O.a)({},e.profile),{},{photos:t.photos})});default:return e}},messagesPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":return Object(O.a)(Object(O.a)({},e),{},{newPostText:"",messages:[].concat(Object(g.a)(e.messages),[{id:6,message:t.text}])});default:return e}},userPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:ot(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return console.log(ot(e.users,t.userId,"id",{followed:!0})),Object(O.a)(Object(O.a)({},e),{},{users:ot(e.users,t.userId,"id",{followed:!0})});case"SET_USERS":return Object(O.a)(Object(O.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case it:return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(g.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:case re:return console.log(t.payload),Object(O.a)(Object(O.a)({},e),t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nt:return Object(O.a)(Object(O.a)({},e),{},{initialized:!0});default:return e}},form:Tt.a}),Rt=Object(h.e)(Ft,Object(h.a)(Ut.a));window.store=Rt;var Lt=Rt;o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(v.a,{children:Object(p.jsx)(d.a,{store:Lt,children:Object(p.jsx)(yt,{})})})}),document.getElementById("root")),At()},34:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1-OWX",error:"FormsControls_error__9hqAk",formSubmissoinError:"FormsControls_formSubmissoinError__Zw5gy",inputElem:"FormsControls_inputElem__2eenS"}},36:function(e,t,n){e.exports={header:"Header_header__2aBSP",logoImg:"Header_logoImg__1wtpB",loginBlock:"Header_loginBlock__1pf-7",loginBlockContainer:"Header_loginBlockContainer__X2UsU",loginName:"Header_loginName__3mmga",line:"Header_line__1oGww"}},47:function(e,t,n){e.exports={nav:"Navbar_nav__2zCt2",itemContainer:"Navbar_itemContainer__3rGWk",link:"Navbar_link__256bs",activeLink:"Navbar_activeLink__3myhE",img:"Navbar_img__kubgk"}},70:function(e,t,n){e.exports={usersPageContainer:"Users_usersPageContainer__1wBua",userContainer:"Users_userContainer__3uXOx",user:"Users_user__1ZMTn"}},93:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__2Mc5B",posts:"MyPosts_posts__LdFJw"}}},[[288,1,2]]]);
//# sourceMappingURL=main.3f679b4b.chunk.js.map